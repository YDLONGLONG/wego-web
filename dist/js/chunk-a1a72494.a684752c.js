(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1a72494"],{"261e":function(e,s,r){},"9ffa":function(e,s,r){"use strict";r("261e")},ac78:function(e,s,r){"use strict";r.r(s);var t=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",[r("div",{staticClass:"bg"}),r("div",{staticClass:"main"},[r("div",{staticClass:"mine"},[r("el-form",{attrs:{"label-width":"80px"}},[r("el-form-item",{attrs:{label:"头像"}},[r("el-upload",{attrs:{name:"file",action:this.$apiServer+"/user/editUserImg",data:{userid:e.userId},"show-file-list":!1,"on-success":e.success,"before-upload":e.beforeUpload,accept:".jpg,.jpeg,.png",disabled:this.$route.params.userid!=e.userId}},[r("el-avatar",{attrs:{size:64,src:this.$apiServer+e.user.avatar,title:"点击头像可上传"}})],1)],1),r("el-form-item",{attrs:{label:"昵称"}},[r("el-input",{attrs:{disabled:this.$route.params.userid!=e.userId},model:{value:e.user.username,callback:function(s){e.$set(e.user,"username",s)},expression:"user.username"}})],1),r("el-form-item",{attrs:{label:"年龄"}},[r("el-input",{attrs:{disabled:this.$route.params.userid!=e.userId},model:{value:e.user.userinfo.age,callback:function(s){e.$set(e.user.userinfo,"age",s)},expression:"user.userinfo.age"}})],1),r("el-form-item",{attrs:{label:"性别"}},[r("el-select",{attrs:{placeholder:"请选择您的性别",disabled:this.$route.params.userid!=e.userId},model:{value:e.user.userinfo.sex,callback:function(s){e.$set(e.user.userinfo,"sex",s)},expression:"user.userinfo.sex"}},[r("el-option",{attrs:{label:"男",value:"0"}}),r("el-option",{attrs:{label:"女",value:"1"}})],1),e._v(" "+e._s(0==e.user.userinfo.sex?"男":"女")+" ")],1),r("el-form-item",{attrs:{label:"地址"}},[r("el-input",{attrs:{disabled:this.$route.params.userid!=e.userId},model:{value:e.user.userinfo.address,callback:function(s){e.$set(e.user.userinfo,"address",s)},expression:"user.userinfo.address"}})],1),r("el-form-item",{attrs:{label:"生日"}},[r("el-col",{attrs:{span:11}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",disabled:this.$route.params.userid!=e.userId},model:{value:e.user.userinfo.birthday,callback:function(s){e.$set(e.user.userinfo,"birthday",s)},expression:"user.userinfo.birthday"}})],1)],1),r("el-form-item",{attrs:{label:"注册时间"}},[r("el-col",{attrs:{span:11}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",disabled:""},model:{value:e.user.userinfo.createtime,callback:function(s){e.$set(e.user.userinfo,"createtime",s)},expression:"user.userinfo.createtime"}})],1)],1),r("el-form-item",[this.$route.params.userid==e.userId?r("el-button",{attrs:{type:"primary"},on:{click:e.updateUserInfo}},[e._v("确定修改")]):e._e()],1),r("el-form-item",{attrs:{label:"密码"}},[e._v(" 原密码"),r("el-input",{attrs:{type:"password",disabled:this.$route.params.userid!=e.userId},model:{value:e.oldpassword,callback:function(s){e.oldpassword=s},expression:"oldpassword"}}),e._v(" 新密码"),r("el-input",{attrs:{type:"password",disabled:this.$route.params.userid!=e.userId},model:{value:e.newpassword,callback:function(s){e.newpassword=s},expression:"newpassword"}}),this.$route.params.userid==e.userId?r("el-button",{staticStyle:{"margin-top":"1rem"},attrs:{type:"primary"},on:{click:e.setPassword}},[e._v("确定修改")]):e._e()],1),r("el-form-item",{attrs:{label:"手机"}},[r("el-input",{attrs:{disabled:this.$route.params.userid!=e.userId},model:{value:e.user.phone,callback:function(s){e.$set(e.user,"phone",s)},expression:"user.phone"}}),this.$route.params.userid==e.userId?r("el-button",{staticStyle:{"margin-top":"1rem"},attrs:{type:"primary"},on:{click:e.bindPhone}},[e._v("确定修改")]):e._e()],1),r("el-form-item",{attrs:{label:"邮箱"}},[r("el-input",{attrs:{disabled:this.$route.params.userid!=e.userId},model:{value:e.user.email,callback:function(s){e.$set(e.user,"email",s)},expression:"user.email"}}),this.$route.params.userid==e.userId?r("el-button",{staticStyle:{"margin-top":"1rem"},attrs:{type:"primary"},on:{click:e.bindEmail}},[e._v("确定修改")]):e._e()],1)],1)],1)])])},a=[],u=r("1da1"),i=r("5530"),n=(r("96cf"),r("c24f")),o=r("2f62"),l={data:function(){return{user:{username:"",avatar:"",phone:"",email:"",userinfo:{age:"",sex:"",birthday:"",address:""}},headurl:"",oldpassword:"",newpassword:""}},computed:Object(i["a"])({},Object(o["c"])(["userId"])),methods:{setPassword:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(n["k"])({userid:e.userId,oldpassword:e.oldpassword,newpassword:e.newpassword});case 2:r=s.sent,0==r.errCode?e.$message.success(r.message):e.$message.error(r.message);case 4:case"end":return s.stop()}}),s)})))()},bindPhone:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(n["c"])({userid:e.userId,phone:e.user.phone});case 2:r=s.sent,0==r.errCode?e.$message.success(r.message):e.$message.error(r.message);case 4:case"end":return s.stop()}}),s)})))()},bindEmail:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(n["b"])({userid:e.userId,email:e.user.email});case 2:r=s.sent,0==r.errCode?e.$message.success(r.message):e.$message.error(r.message);case 4:case"end":return s.stop()}}),s)})))()},updateUserInfo:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function s(){var r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(n["m"])({username:e.user.username,age:e.user.userinfo.age,sex:e.user.userinfo.sex,birthday:e.user.userinfo.birthday,address:e.user.userinfo.address,userid:e.userId});case 2:r=s.sent,0==r.errCode?e.$message.success(r.message):e.$message.error(r.message);case 4:case"end":return s.stop()}}),s)})))()},beforeUpload:function(e){var s="image/jpeg"===e.type,r=e.size/1024/1024<1;return s?!!r||(this.$message.error("图片大小不能超过 1MB!"),!1):(this.$message.error("格式只能是jpg/jpeg/png格式!"),!1)},success:function(e){0==e.errCode&&this.$message.success(message)},init:function(e){var s=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(n["a"])(e);case 2:if(t=r.sent,s.user=t.data[0],s.headurl=s.$apiServer+s.user.avatar,s.userId){r.next=10;break}return s.$message.warning("请先登录"),r.next=9,s.$router.push("/login");case 9:return r.abrupt("return",r.sent);case 10:case"end":return r.stop()}}),r)})))()}},created:function(){var e=this.$route.params.userid;this.init(e)}},d=l,c=(r("9ffa"),r("2877")),m=Object(c["a"])(d,t,a,!1,null,"43558da4",null);s["default"]=m.exports}}]);
//# sourceMappingURL=chunk-a1a72494.a684752c.js.map