{"version":3,"sources":["webpack:///./src/views/login/children/loginCode.vue?3351","webpack:///./src/views/login/children/loginCode.vue?7d76","webpack:///src/views/login/children/loginCode.vue","webpack:///./src/views/login/children/loginCode.vue?819f","webpack:///./src/views/login/children/loginCode.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","user","rules","model","value","callback","$$v","$set","expression","_n","on","getCode","_v","staticStyle","codelogin","staticRenderFns","data","email","code","required","message","trigger","type","isDisabled","methods","mapActions","valid","account","result","console","sendEmail","count","tag","setInterval","clearInterval","created","component"],"mappings":"yIAAA,W,yCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,UAAU,CAACE,IAAI,YAAYC,MAAM,CAAC,MAAQP,EAAIQ,KAAK,MAAQR,EAAIS,MAAM,cAAc,KAAK,CAACL,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,UAAU,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,YAAc,QAAQG,MAAM,CAACC,MAAOX,EAAIQ,KAAU,MAAEI,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIQ,KAAM,QAASK,IAAME,WAAW,iBAAiB,GAAGX,EAAG,eAAe,CAACG,MAAM,CAAC,KAAO,SAAS,CAACH,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,KAAK,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,YAAc,SAASG,MAAM,CAACC,MAAOX,EAAIQ,KAAS,KAAEI,SAAS,SAAUC,GAAMb,EAAIc,KAAKd,EAAIQ,KAAM,OAAQR,EAAIgB,GAAGH,KAAOE,WAAW,gBAAgB,GAAGX,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,EAAE,OAAS,IAAI,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWU,GAAG,CAAC,MAAQjB,EAAIkB,UAAU,CAAClB,EAAImB,GAAG,WAAW,IAAI,GAAGf,EAAG,eAAe,CAACA,EAAG,YAAY,CAACgB,YAAY,CAAC,MAAQ,SAASb,MAAM,CAAC,KAAO,WAAWU,GAAG,CAAC,MAAQjB,EAAIqB,YAAY,CAACrB,EAAImB,GAAG,SAAS,GAAGf,EAAG,cAAc,CAACgB,YAAY,CAAC,MAAQ,UAAU,QAAU,QAAQ,aAAa,SAASb,MAAM,CAAC,QAAU,GAAG,GAAK,qBAAqB,CAACP,EAAImB,GAAG,aAAa,IAAI,IAC1jCG,EAAkB,G,4DCyBP,GACbC,KADF,WAEI,MAAO,CACLf,KAAMA,CACJgB,MAAOA,GACPC,KAARA,IAEMhB,MAAOA,CACLe,MAAOA,CACf,CAAUE,UAAVA,EAAUC,QAAVA,QAAUC,QAAVA,QACA,CAAUC,KAAVA,QAAUF,QAAVA,aAAUC,QAAVA,SAEQH,KAAMA,CACd,CAAUC,UAAVA,EAAUC,QAAVA,SAAUC,QAAVA,QACA,CAAUC,KAAVA,SAAUF,QAAVA,cAAUC,QAAVA,UAGME,YAAYA,IAGhBC,QAASA,iCACXC,+BADA,IAEIX,UAFJ,WAEA,wJACA,6LACAY,EADA,iCAEAZ,gBACAI,iBACAS,uBAJA,UAEAC,EAFA,OAMAC,eACAD,UAPA,wBAQA,8BACA,8BATA,UAUA,iBAVA,gCAWA,4BAXA,uCAaA,2BAbA,mBAcA,GAdA,mGADA,8CAmBIjB,QArBJ,WAqBA,kLACAmB,6BADA,OACAF,EADA,OAEA,UAEA,4BADA,8BAEAG,EAAA,EACA,gBACAC,EAAAC,wBACA,WAGA,OAFAC,iBACA,gBACA,iBAEA,mCACA,KAdA,gDAiBEC,QA1DF,cC1BiX,I,wBCQ7WC,EAAY,eACd,EACA5C,EACAuB,GACA,EACA,KACA,WACA,MAIa,aAAAqB,E","file":"js/chunk-df2ffa0a.56a82192.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./loginCode.vue?vue&type=style&index=0&id=2e0791b2&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{ref:\"loginCode\",attrs:{\"model\":_vm.user,\"rules\":_vm.rules,\"status-icon\":\"\"}},[_c('el-form-item',{attrs:{\"prop\":\"email\"}},[_c('el-input',{attrs:{\"placeholder\":\"输入邮箱\"},model:{value:(_vm.user.email),callback:function ($$v) {_vm.$set(_vm.user, \"email\", $$v)},expression:\"user.email\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"code\"}},[_c('el-col',{attrs:{\"span\":14}},[_c('el-input',{attrs:{\"placeholder\":\"输入验证码\"},model:{value:(_vm.user.code),callback:function ($$v) {_vm.$set(_vm.user, \"code\", _vm._n($$v))},expression:\"user.code\"}})],1),_c('el-col',{attrs:{\"span\":1,\"offset\":2}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.getCode}},[_vm._v(\"点击获取\")])],1)],1),_c('el-form-item',[_c('el-button',{staticStyle:{\"width\":\"30rem\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.codelogin}},[_vm._v(\"提交\")])],1),_c('router-link',{staticStyle:{\"color\":\"#00A1D6\",\"display\":\"block\",\"text-align\":\"right\"},attrs:{\"replace\":\"\",\"to\":\"/login/loginForm\"}},[_vm._v(\" 密码登录 \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-form :model=\"user\" :rules=\"rules\" status-icon ref=\"loginCode\">\r\n      <el-form-item prop=\"email\">\r\n        <el-input v-model=\"user.email\" placeholder=\"输入邮箱\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"code\">\r\n        <el-col :span=\"14\">\r\n          <el-input v-model.number=\"user.code\" placeholder=\"输入验证码\"></el-input>\r\n        </el-col>\r\n        <el-col :span=\"1\" :offset=\"2\">\r\n          <el-button type=\"primary\" @click=\"getCode\">点击获取</el-button>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" style=\"width:30rem\" @click=\"codelogin\">提交</el-button>\r\n      </el-form-item>\r\n      <router-link replace to=\"/login/loginForm\" style=\"color: #00A1D6;display: block;text-align: right\">\r\n        密码登录\r\n      </router-link>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapActions } from 'vuex'\r\nimport { sendEmail, codelogin } from '../../../api/user'\r\nexport default {\r\n  data() {\r\n    return {\r\n      user: {\r\n        email: '',\r\n        code:''\r\n      },\r\n      rules: {\r\n        email: [\r\n          { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n          { type: 'email', message: '请输入正确的邮箱地址', trigger: 'blur' }\r\n        ],\r\n        code: [\r\n          { required: true, message: '请输入验证码', trigger: 'blur' },\r\n          { type: 'number', message: '请输入正确的6位验证码', trigger: 'blur' }\r\n        ]\r\n      },\r\n      isDisabled: false\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(['setUserId']),\r\n    async codelogin() {\r\n      this.$refs.loginCode.validate(async valid => {\r\n        if (valid) {\r\n          let result = await codelogin({\r\n            code: this.user.code,\r\n            account: this.user.email\r\n          })\r\n          console.log(result)\r\n          if (!result.errCode) {\r\n            this.$message.success(result.message)\r\n            this.setUserId(result.data[0].userid)\r\n            await this.$router.go(-1)\r\n          } else this.$message.error(result.message)\r\n        } else {\r\n          this.$message.error('请修改错误项')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    async getCode() {\r\n      let result = await sendEmail(this.user.email)\r\n      if (!result.errCode) {\r\n        this.$message.success(result.message)\r\n      } else this.$message.error(result.message)\r\n      let count = 0\r\n      this.isDisabled = true\r\n      let tag = setInterval(() => {\r\n        if (++count >= 60) {\r\n          clearInterval(tag)\r\n          this.isDisabled = false\r\n          return (this.btnText = '点击获取')\r\n        }\r\n        this.btnText = `${60 - count}秒后获取`\r\n      }, 1000)\r\n    }\r\n  },\r\n  created() {}\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.el-form {\r\n  width: 30rem;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./loginCode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./loginCode.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./loginCode.vue?vue&type=template&id=2e0791b2&scoped=true&\"\nimport script from \"./loginCode.vue?vue&type=script&lang=js&\"\nexport * from \"./loginCode.vue?vue&type=script&lang=js&\"\nimport style0 from \"./loginCode.vue?vue&type=style&index=0&id=2e0791b2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2e0791b2\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}